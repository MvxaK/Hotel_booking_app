<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Vacation Houses</title>
    <th:block layout:fragment="page-specific-head">
        <link rel="stylesheet" href="/css/hotels.css">
    </th:block>
</head>
<body>
<main layout:fragment="content">
    <div class="container py-4">
        <h1 class="text-center mb-5 fw-bold text-dark">Our Vacation Houses</h1>

        <div class="row g-4">
            <div th:each="house : ${houses}" class="col-12 col-sm-6 col-lg-4">
                <div class="card border-0 shadow h-100 hotel-room-card">
                    <img th:if="${house.images != null and !house.images.isEmpty()}"
                         th:src="${house.images.get(0).url}"
                         class="card-img-top" alt="House image"
                         style="height: 220px; object-fit: cover;">

                    <img th:unless="${house.images != null and !house.images.isEmpty()}"
                         src="https://picsum.photos/600/400?random=1"
                         class="card-img-top" alt="No house image available"
                         style="height: 220px; object-fit: cover;">

                    <div class="card-body d-flex flex-column">
                        <div class="flex-grow-1">
                            <h5 class="fw-semibold text-dark" th:text="${house.name}">Modern Villa</h5>
                            <p class="text-muted small mb-2" th:text="${house.location}">Mountain View Area</p>
                            <p class="text-muted small mb-3" th:text="${#strings.abbreviate(house.description, 100)}">Beautiful house</p>
                            <p class="fw-bold text-warning fs-5 mb-2" th:text="'₸' + ${house.pricePerNight} + '/night'">₸15000/night</p>

                            <div class="house-features">
                                <p class="text-muted small mb-2" th:text="'Capacity: ' + ${house.capacity} + ' guests'">Capacity: 6 guests</p>
                                <p class="text-muted small mb-2" th:text="'Rooms: ' + ${house.roomsNumber}">Rooms: 3</p>
                                <p class="text-muted small mb-2" th:text="'Beds: ' + ${house.bedsCount}">Beds: 4</p>
                                <p class="text-muted small mb-2" th:text="'Parking: ' + ${house.parkingSlots} + ' slots'">Parking: 2 slots</p>
                            </div>

                            <p class="text-muted small mb-2"> Status:
                                <span th:if="${house.available}" class="badge bg-success">Available</span>
                                <span th:if="${!house.available}" class="badge bg-danger">Occupied</span>
                            </p>
                        </div>

                        <div class="mt-3">
                            <a th:href="@{'/houses/' + ${house.id}}"
                               class="btn btn-custom-warning w-100">
                                View House Details
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div th:if="${houses == null or houses.isEmpty()}" class="text-center py-5">
            <h4 class="text-muted">No houses available at the moment</h4>
            <p class="text-muted">Please check back later for available vacation houses.</p>
        </div>
    </div>
</main>
</body>
</html>